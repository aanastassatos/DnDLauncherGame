[gd_scene load_steps=15 format=3 uid="uid://bu5rbi6tmk83u"]

[ext_resource type="Script" uid="uid://0vmwscm1swpe" path="res://scripts/controller.gd" id="1_lbhrr"]
[ext_resource type="PackedScene" uid="uid://brmyj48t05jr" path="res://scenes/player.tscn" id="1_lnu2h"]
[ext_resource type="Script" uid="uid://o2gu4wndfc5r" path="res://scripts/camera_2d.gd" id="2_lbhrr"]
[ext_resource type="Script" uid="uid://bn41b5o32be40" path="res://scripts/lines.gd" id="3_iywne"]
[ext_resource type="Script" uid="uid://ieirnvo0p1qc" path="res://scripts/aim_line.gd" id="5_iywne"]
[ext_resource type="Script" uid="uid://2t3gc362lajr" path="res://scripts/power_bar.gd" id="6_p57ef"]
[ext_resource type="Script" uid="uid://c3r6j6w4bvbpx" path="res://scripts/hud.gd" id="7_u5sy4"]
[ext_resource type="Script" uid="uid://c115i6dexqvso" path="res://scripts/enemy_spawner.gd" id="8_0tnpc"]
[ext_resource type="PackedScene" uid="uid://ct5p61x2qm88v" path="res://scenes/enemy.tscn" id="9_vtaks"]
[ext_resource type="Script" uid="uid://ckb4let4rc0e" path="res://scripts/debug_display.gd" id="10_vtaks"]

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_rnjyy"]
friction = 0.75

[sub_resource type="CanvasItemMaterial" id="CanvasItemMaterial_4dvvg"]

[sub_resource type="WorldBoundaryShape2D" id="WorldBoundaryShape2D_rnjyy"]
distance = -1.0

[sub_resource type="Gradient" id="Gradient_iywne"]
offsets = PackedFloat32Array(0, 0.21917808)
colors = PackedColorArray(0, 1, 0.05499029, 1, 1, 0, 0, 1)

[node name="Game" type="Node2D"]

[node name="Controller" type="Node2D" parent="."]
script = ExtResource("1_lbhrr")

[node name="Player" parent="Controller" instance=ExtResource("1_lnu2h")]
position = Vector2(-39, 37)

[node name="Camera2D" type="Camera2D" parent="Controller/Player"]
offset = Vector2(375, 120)
ignore_rotation = false
limit_bottom = 100
position_smoothing_speed = 10.0
script = ExtResource("2_lbhrr")
aiming_offset_x = 375.0

[node name="Ground" type="StaticBody2D" parent="Controller"]
position = Vector2(0, 98)
collision_layer = 4
collision_mask = 3
physics_material_override = SubResource("PhysicsMaterial_rnjyy")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Controller/Ground"]
material = SubResource("CanvasItemMaterial_4dvvg")
shape = SubResource("WorldBoundaryShape2D_rnjyy")

[node name="Line2D" type="Line2D" parent="Controller/Ground"]
position = Vector2(-5992, 0)
points = PackedVector2Array(-1000000, 2, 100000000, 2)
default_color = Color(0.3882353, 0.7411765, 0.08627451, 0.9882353)

[node name="Lines" type="Node2D" parent="Controller"]
visibility_layer = 4
script = ExtResource("3_iywne")
player = NodePath("../Player")

[node name="Label" type="Label" parent="Controller/Lines"]
offset_right = 40.0
offset_bottom = 23.0
text = "Start"
metadata/_edit_use_anchors_ = true

[node name="AimLine" type="Line2D" parent="Controller"]
physics_interpolation_mode = 2
z_index = -1
points = PackedVector2Array(0, 0, 87, 0)
width = 1.0
script = ExtResource("5_iywne")

[node name="PowerBar" type="Node2D" parent="Controller"]
position = Vector2(-759, 0)
script = ExtResource("6_p57ef")

[node name="PowerLine" type="Line2D" parent="Controller/PowerBar"]
points = PackedVector2Array(0, 0, 100, 0)
default_color = Color(0.98878354, 0, 0, 1)
gradient = SubResource("Gradient_iywne")

[node name="HUD" type="CanvasLayer" parent="Controller"]
script = ExtResource("7_u5sy4")

[node name="DistanceControl" type="Control" parent="Controller/HUD"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0

[node name="DistanceLabel" type="Label" parent="Controller/HUD/DistanceControl"]
layout_mode = 1
offset_left = 10.0
offset_top = 10.0
offset_right = 115.0
offset_bottom = 33.0
text = "Distance: 0 m"

[node name="HighScoreLabel" type="Label" parent="Controller/HUD/DistanceControl"]
layout_mode = 1
offset_left = 10.0
offset_top = 40.0
offset_right = 130.0
offset_bottom = 63.0
text = "High Score: 0 m"

[node name="InstructionsControl" type="Control" parent="Controller/HUD"]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2

[node name="MiddleText" type="Label" parent="Controller/HUD/InstructionsControl"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2

[node name="EnemySpawner" type="Node2D" parent="Controller" node_paths=PackedStringArray("camera")]
script = ExtResource("8_0tnpc")
enemy_scene = ExtResource("9_vtaks")
camera = NodePath("../Player/Camera2D")

[node name="Debug" type="CanvasLayer" parent="Controller"]
script = ExtResource("10_vtaks")

[node name="Control" type="Control" parent="Controller/Debug"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="linear_velocity" type="Label" parent="Controller/Debug/Control"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -40.0
offset_bottom = 23.0
grow_horizontal = 0
text = "(0,0)"
horizontal_alignment = 1
